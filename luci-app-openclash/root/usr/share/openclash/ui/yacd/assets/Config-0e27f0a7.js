import{r as $,R as p,p as v,c as le,b as t,j as c,s as oe,t as G,v as H,w as se,x as J,d as Q,y as ie,g as K,z as ce,u as de,A as me,D as j,E as ue,F as he,G as pe,H as ve,J as fe,K as ge,L as be,C as ye,S as _,N as we,B as w,O as ke,P as _e,Q as Ce,T as Oe}from"./index-e5a176ea.js";import{r as Ne}from"./logs-21b21b6b.js";import{S as C}from"./Select-08cce14a.js";import{I as P,S as xe}from"./Input-6b5b5d17.js";import{R as E}from"./rotate-cw-a9fb12e9.js";function L(){return L=Object.assign||function(e){for(var l=1;l<arguments.length;l++){var r=arguments[l];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},L.apply(this,arguments)}function Se(e,l){if(e==null)return{};var r=je(e,l),a,o;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)a=n[o],!(l.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function je(e,l){if(e==null)return{};var r={},a=Object.keys(e),o,n;for(n=0;n<a.length;n++)o=a[n],!(l.indexOf(o)>=0)&&(r[o]=e[o]);return r}var R=$.forwardRef(function(e,l){var r=e.color,a=r===void 0?"currentColor":r,o=e.size,n=o===void 0?24:o,d=Se(e,["color","size"]);return p.createElement("svg",L({ref:l,xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),p.createElement("polyline",{points:"8 17 12 21 16 17"}),p.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),p.createElement("path",{d:"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"}))});R.propTypes={color:v.string,size:v.oneOfType([v.string,v.number])};R.displayName="DownloadCloud";const Pe=R;function z(){return z=Object.assign||function(e){for(var l=1;l<arguments.length;l++){var r=arguments[l];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},z.apply(this,arguments)}function Ee(e,l){if(e==null)return{};var r=Ie(e,l),a,o;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)a=n[o],!(l.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Ie(e,l){if(e==null)return{};var r={},a=Object.keys(e),o,n;for(n=0;n<a.length;n++)o=a[n],!(l.indexOf(o)>=0)&&(r[o]=e[o]);return r}var F=$.forwardRef(function(e,l){var r=e.color,a=r===void 0?"currentColor":r,o=e.size,n=o===void 0?24:o,d=Ee(e,["color","size"]);return p.createElement("svg",z({ref:l,xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),p.createElement("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),p.createElement("polyline",{points:"16 17 21 12 16 7"}),p.createElement("line",{x1:"21",y1:"12",x2:"9",y2:"12"}))});F.propTypes={color:v.string,size:v.oneOfType([v.string,v.number])};F.displayName="LogOut";const Le=F;function T(){return T=Object.assign||function(e){for(var l=1;l<arguments.length;l++){var r=arguments[l];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},T.apply(this,arguments)}function ze(e,l){if(e==null)return{};var r=Te(e,l),a,o;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)a=n[o],!(l.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Te(e,l){if(e==null)return{};var r={},a=Object.keys(e),o,n;for(n=0;n<a.length;n++)o=a[n],!(l.indexOf(o)>=0)&&(r[o]=e[o]);return r}var M=$.forwardRef(function(e,l){var r=e.color,a=r===void 0?"currentColor":r,o=e.size,n=o===void 0?24:o,d=ze(e,["color","size"]);return p.createElement("svg",T({ref:l,xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),p.createElement("polyline",{points:"3 6 5 6 21 6"}),p.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),p.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),p.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}))});M.propTypes={color:v.string,size:v.oneOfType([v.string,v.number])};M.displayName="Trash2";const $e=M,Re="_root_1vck5_4",Fe="_section_1vck5_5",Me="_wrapSwitch_1vck5_30",De="_sep_1vck5_36",Ue="_label_1vck5_49",i={root:Re,section:Fe,wrapSwitch:Me,sep:De,label:Ue},We="_fieldset_1hnn2_1",Be="_input_1hnn2_10",Ae="_cnt_1hnn2_10",I={fieldset:We,input:Be,cnt:Ae};function Ve({OptionComponent:e,optionPropsList:l,selectedIndex:r,onChange:a}){const o=le("visually-hidden",I.input),n=d=>{a(d.target.value)};return t("fieldset",{className:I.fieldset,children:l.map((d,b)=>c("label",{children:[t("input",{type:"radio",checked:r===b,name:"selection",value:b,"aria-labelledby":"traffic chart type "+b,onChange:n,className:o}),t("div",{className:I.cnt,children:t(e,{...d})})]},b))})}const{useMemo:Ge}=J,He={plugins:{legend:{display:!1}},scales:{x:{display:!1,type:"category"},y:{display:!1,type:"linear"}}},q=[23e3,35e3,46e3,33e3,9e4,68e3,23e3,45e3],Je=[184e3,183e3,196e3,182e3,19e4,186e3,182e3,189e3],Qe=q;function Ke({id:e}){const l=oe.read(),r=Ge(()=>({labels:Qe,datasets:[{...G,...H[e].up,data:q},{...G,...H[e].down,data:Je}]}),[e]),a="chart-"+e;return se(l.Chart,a,r,null,He),t("div",{style:{width:80,padding:5},children:t("canvas",{id:a})})}const{useEffect:X,useState:qe,useCallback:f,useRef:Xe}=J,Ye=[{id:0},{id:1},{id:2},{id:3}],Ze=[["debug","Debug"],["info","Info"],["warning","Warning"],["error","Error"],["silent","Silent"]],et=[{key:"port",label:"Http Port"},{key:"socks-port",label:"Socks5 Port"},{key:"mixed-port",label:"Mixed Port"},{key:"redir-port",label:"Redir Port"},{key:"mitm-port",label:"MITM Port"}],tt=[["zh-cn","简体中文"],["zh-tw","繁體中文"],["en","English"],["vi","Vietnamese"]],nt=[["direct","Direct"],["rule","Rule"],["script","Script"],["global","Global"]],at=[["gvisor","gVisor"],["mixed","Mixed"],["system","System"]],rt=e=>({configs:ie(e),apiConfig:K(e)}),lt=e=>({selectedChartStyleIndex:_e(e),latencyTestUrl:Ce(e),useEmojiFont:Oe(e),apiConfig:K(e)}),ot=Q(lt)(ct),vt=Q(rt)(st);function st({dispatch:e,configs:l,apiConfig:r}){return X(()=>{e(ce(r))},[e,r]),t(ot,{configs:l})}function it(e){return e&&e.meta&&!e.premium?"Clash.Meta ":e&&e.meta&&e.premium?"sing-box ":"Clash Premium"}function ct({dispatch:e,configs:l,selectedChartStyleIndex:r,latencyTestUrl:a,useEmojiFont:o,apiConfig:n}){var W,B,A,V;const{t:d,i18n:b}=de(),[m,O]=qe(l),D=Xe(l);X(()=>{D.current!==l&&O(l),D.current=l},[l]);const Y=f(()=>{e(me("apiConfig"))},[e]),N=f((s,u)=>{O({...m,[s]:u})},[m]),U=f((s,u)=>{const g={...m.tun,[s]:u};O({...m,tun:{...g}})},[m]),y=f(({name:s,value:u})=>{switch(s){case"mode":case"log-level":case"allow-lan":case"sniffing":N(s,u),e(j(n,{[s]:u})),s==="log-level"&&Ne({...n,logLevel:u});break;case"mitm-port":case"redir-port":case"socks-port":case"mixed-port":case"port":if(u!==""){const g=parseInt(u,10);if(g<0||g>65535)return}N(s,u);break;case"enable":case"stack":U(s,u),e(j(n,{tun:{[s]:u}}));break;default:return}},[n,e,N,U]),{selectChartStyleIndex:Z,updateAppConfig:x}=ue(),k=f(s=>{const{name:u,value:g}=s.target;switch(u){case"port":case"socks-port":case"mixed-port":case"redir-port":case"mitm-port":{const S=parseInt(g,10);if(S<0||S>65535)return;e(j(n,{[u]:S}));break}case"latencyTestUrl":{x(u,g);break}case"device name":case"interface name":break;default:throw new Error(`unknown input name ${u}`)}},[n,e,x]),ee=f(()=>{e(he(n))},[n,e]),te=f(()=>{e(pe(n))},[n,e]),ne=f(()=>{e(ve(n))},[n,e]),ae=f(()=>{e(fe(n))},[n,e]),re=f(()=>{e(ge(n))},[n,e]),{data:h}=be(["/version",n],()=>ke("/version",n));return c("div",{children:[t(ye,{title:d("Config")}),c("div",{className:i.root,children:[h.meta&&h.premium||et.map(s=>m[s.key]!==void 0?c("div",{children:[t("div",{className:i.label,children:s.label}),t(P,{name:s.key,value:m[s.key],onChange:({target:{name:u,value:g}})=>y({name:u,value:g}),onBlur:k})]},s.key):null),c("div",{children:[t("div",{className:i.label,children:"Mode"}),t(C,{options:m["mode-list"]?m["mode-list"].map(s=>[s,s]):nt,selected:m["mode-list"]?m.mode:m.mode.toLowerCase(),onChange:s=>y({name:"mode",value:s.target.value})})]}),c("div",{children:[t("div",{className:i.label,children:"Log Level"}),t(C,{options:Ze,selected:m["log-level"].toLowerCase(),onChange:s=>y({name:"log-level",value:s.target.value})})]}),h.meta&&h.premium||c("div",{children:[t("div",{className:i.label,children:d("allow_lan")}),t("div",{className:i.wrapSwitch,children:t(_,{name:"allow-lan",checked:m["allow-lan"],onChange:s=>y({name:"allow-lan",value:s})})})]}),h.meta&&!h.premium&&c("div",{children:[t("div",{className:i.label,children:d("tls_sniffing")}),t("div",{className:i.wrapSwitch,children:t(_,{name:"sniffing",checked:m.sniffing,onChange:s=>y({name:"sniffing",value:s})})})]})]}),t("div",{className:i.sep,children:t("div",{})}),h.meta&&c(we,{children:[h.premium||c("div",{children:[c("div",{className:i.section,children:[c("div",{children:[t("div",{className:i.label,children:d("enable_tun_device")}),t("div",{className:i.wrapSwitch,children:t(_,{checked:(W=m.tun)==null?void 0:W.enable,onChange:s=>y({name:"enable",value:s})})})]}),c("div",{children:[t("div",{className:i.label,children:"TUN IP Stack"}),t(C,{options:at,selected:(A=(B=m.tun)==null?void 0:B.stack)==null?void 0:A.toLowerCase(),onChange:s=>y({name:"stack",value:s.target.value})})]}),c("div",{children:[t("div",{className:i.label,children:"Device Name"}),t(P,{name:"device name",value:(V=m.tun)==null?void 0:V.device,onChange:k})]}),c("div",{children:[t("div",{className:i.label,children:"Interface Name"}),t(P,{name:"interface name",value:m["interface-name"]||"",onChange:k})]})]}),t("div",{className:i.sep,children:t("div",{})})]}),c("div",{className:i.section,children:[c("div",{children:[t("div",{className:i.label,children:"Reload"}),t(w,{start:t(E,{size:16}),label:d("reload_config_file"),onClick:ee})]}),h.meta&&!h.premium&&c("div",{children:[t("div",{className:i.label,children:"GEO Databases"}),t(w,{start:t(Pe,{size:16}),label:d("update_geo_databases_file"),onClick:ae})]}),c("div",{children:[t("div",{className:i.label,children:"FakeIP"}),t(w,{start:t($e,{size:16}),label:d("flush_fake_ip_pool"),onClick:re})]}),h.meta&&!h.premium&&c("div",{children:[t("div",{className:i.label,children:"Restart"}),t(w,{start:t(E,{size:16}),label:d("restart_core"),onClick:te})]}),h.meta&&!h.premium&&c("div",{children:[t("div",{className:i.label,children:"⚠️ Upgrade ⚠️"}),t(w,{start:t(E,{size:16}),label:d("upgrade_core"),onClick:ne})]})]}),t("div",{className:i.sep,children:t("div",{})})]}),c("div",{className:i.section,children:[c("div",{children:[t("div",{className:i.label,children:d("latency_test_url")}),t(xe,{name:"latencyTestUrl",type:"text",value:a,onBlur:k})]}),c("div",{children:[t("div",{className:i.label,children:d("lang")}),t("div",{children:t(C,{options:tt,selected:b.language,onChange:s=>b.changeLanguage(s.target.value)})})]}),c("div",{children:[t("div",{className:i.label,children:d("use_emoji_font")}),t("div",{className:i.wrapSwitch,children:t(_,{name:"useEmojiFont",checked:o,onChange:s=>x("useEmojiFont",s)})})]}),c("div",{children:[t("div",{className:i.label,children:d("chart_style")}),t(Ve,{OptionComponent:Ke,optionPropsList:Ye,selectedIndex:r,onChange:Z})]}),c("div",{children:[c("div",{className:i.label,children:[d("current_backend"),t("p",{children:it(h)+(n==null?void 0:n.baseURL)})]}),t("div",{className:i.label,children:"Action"}),t(w,{start:t(Le,{size:16}),label:d("switch_backend"),onClick:Y})]})]})]})}export{vt as default};
