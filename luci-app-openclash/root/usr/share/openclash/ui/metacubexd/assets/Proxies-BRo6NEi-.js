import{t as e}from"./IconChevronRight-Dm97ewab.js";import{t}from"./IconReload-BSlLPZuq.js";import{$t as n,Bt as r,C as i,Dt as a,Ht as o,Nt as s,Pt as c,Qt as l,Rt as u,S as d,T as f,Vt as p,Xt as m,Zt as h,_t as g,a as _,an as v,bn as y,c as ee,f as te,gn as b,i as x,it as S,ln as C,m as ne,mn as w,nt as T,o as E,ot as D,pn as O,q as re,r as ie,rn as k,rt as A,sn as j,st as M,tn as N,un as P,vt as ae,w as oe,x as F,zt as I}from"./index-DIwJcTz_.js";var L=c(`outline`,`brand-speedtest`,`BrandSpeedtest`,[[`path`,{d:`M5.636 19.364a9 9 0 1 1 12.728 0`}],[`path`,{d:`M16 9l-4 4`}]]),R={width:0,height:0};function z(){return{width:window.innerWidth,height:window.innerHeight}}function B(){let[e,t]=p(R,z);return o(window,`resize`,()=>t(z())),e}var V=k(`<div class=mb-2>`),H=k(`<div class="flex gap-2"><div class=flex-1></div><div class=flex-1>`),U=k(`<div class="grid grid-cols-1 place-items-start gap-2">`);const W=e=>{let t=B(),n=O(()=>t.width>480);return()=>{let t=C(()=>e.children),r=e=>t()?.filter((t,n)=>n%2===e).map(e=>(()=>{var t=V();return l(t,e),t})());return M()&&n()?(()=>{var e=H(),t=e.firstChild,n=t.nextSibling;return l(t,()=>r(0)),l(n,()=>r(1)),e})():(()=>{var e=U();return l(e,t),e})()}};var G=k(`<div class="flex h-full flex-col gap-2"><div class="flex items-center gap-2"><div class="tabs gap-2 tabs-box tabs-sm"></div><div class=ml-auto></div></div><div class="flex-1 overflow-y-auto">`),K=k(`<button><span></span><div class="badge badge-sm">`),q=k(`<div>`),se=k(`<span class=whitespace-nowrap>`),ce=k(`<div class=space-y-2><div class="flex items-center justify-between pr-8"><div class="flex items-center"><span></span><div class="ml-2 badge badge-sm"></div></div></div><div class="flex flex-wrap items-center justify-between gap-2"><div class="badge badge-sm badge-primary"><span class=font-bold></span></div><div class="badge badge-sm badge-secondary">/s`),le=k(`<img>`),ue=k(`<div class="flex items-center justify-between pr-8"><div class="flex flex-wrap items-center gap-1"><span class="line-clamp-1 break-all"></span><div class="badge badge-sm"></div><div class="badge badge-sm"></div></div><div class="flex items-center gap-2">`),de=k(`<div class="flex flex-col gap-2"><div class="text-sm text-slate-500"> `),J=function(e){return e.proxyProviders=`proxyProviders`,e.proxies=`proxies`,e}(J||{}),Y=()=>{let n=te();if(!ne())return n(`/setup`,{replace:!0}),null;let o,[c]=g(),{fetchProxies:p,proxies:h,selectProxyInGroup:C,proxyProviders:k,updateProviderByProviderName:M,updateAllProvider:R,proxyGroupLatencyTest:z,proxyProviderLatencyTest:B,proxyGroupLatencyTestingMap:V,proxyProviderLatencyTestingMap:H,isAllProviderUpdating:U,updatingMap:Y}=F(),X=O(()=>h().filter(e=>!e.hidden)),{speedGroupByName:fe}=re(),[Z,pe]=ae(b({}),{name:`collapsedMap`,storage:localStorage}),Q=(e,t)=>{pe(n=>({...n,[e]:t}))};y(p);let me=async(e,t)=>{e.stopPropagation(),z(t)},he=e=>e.replace(`<svg`,~e.indexOf(`xmlns`)?`<svg`:`<svg xmlns="http://www.w3.org/2000/svg"`).replace(/"/g,`'`).replace(/%/g,`%25`).replace(/#/g,`%23`).replace(/\{/g,`%7B`).replace(/\}/g,`%7D`).replace(/</g,`%3C`).replace(/>/g,`%3E`),ge=(e,t)=>{e.stopPropagation(),B(t)},_e=(e,t)=>{e.stopPropagation(),M(t)},ve=async e=>{e.stopPropagation(),R()},[$,ye]=b(J.proxies),be=()=>[{type:J.proxies,name:c(`proxies`),count:X().length},{type:J.proxyProviders,name:c(`proxyProviders`),count:k().length}];return[P(ee,{get children(){return c(`proxies`)}}),(()=>{var n=G(),p=n.firstChild,h=p.firstChild,g=h.nextSibling,y=p.nextSibling;return l(h,P(v,{get each(){return be()},children:e=>(()=>{var t=K(),n=t.firstChild,i=n.nextSibling;return t.$$click=()=>ye(e.type),l(n,()=>e.name),l(i,()=>e.count),w(()=>m(t,r($()===e.type&&`bg-primary !text-neutral`,`sm:tab-md tab gap-2 px-2`))),t})()})),l(p,P(j,{get when(){return $()===J.proxyProviders},get children(){return P(I,{class:`btn btn-circle btn-sm`,get disabled(){return U()},onClick:e=>ve(e),get icon(){return P(t,{get class(){return r(U()&&`animate-spin text-success`)}})}})}}),g),l(g,P(I,{class:`btn-circle btn-sm btn-primary`,onClick:()=>o?.showModal(),get icon(){return P(s,{})}})),l(y,P(j,{get when(){return $()===J.proxies},get children(){return P(W,{get children(){return P(v,{get each(){return X()},children:t=>{let n=O(()=>i({proxyNames:f({proxyNames:t.all??[],orderingType:D(),testUrl:t.testUrl||null}),enabled:T(),testUrl:t.testUrl||null})),o=(()=>{var i=ce(),o=i.firstChild,s=o.firstChild,c=s.firstChild,u=c.nextSibling,d=o.nextSibling,f=d.firstChild,p=f.firstChild,m=f.nextSibling,h=m.firstChild;return l(s,P(j,{get when(){return t.icon},get children(){return P(j,{get when(){return t.icon.startsWith(`data:image/svg+xml`)},get fallback(){return(()=>{var e=le();return w(n=>{var r=t.icon,i=`${A()}px`,a=`${S()}px`;return r!==n.e&&N(e,`src`,n.e=r),i!==n.t&&((n.t=i)==null?e.style.removeProperty(`height`):e.style.setProperty(`height`,i)),a!==n.a&&((n.a=a)==null?e.style.removeProperty(`margin-right`):e.style.setProperty(`margin-right`,a)),n},{e:void 0,t:void 0,a:void 0}),e})()},get children(){var e=q();return e.style.setProperty(`color`,`oklch(var(--p) / var(--tw-bg-opacity))`),e.style.setProperty(`background-color`,`currentColor`),e.style.setProperty(`mask-size`,`100% 100%`),w(n=>{var r=`${A()}px`,i=`${A()}px`,a=`${S()}px`,o=`url("${he(t.icon)}")`;return r!==n.e&&((n.e=r)==null?e.style.removeProperty(`height`):e.style.setProperty(`height`,r)),i!==n.t&&((n.t=i)==null?e.style.removeProperty(`width`):e.style.setProperty(`width`,i)),a!==n.a&&((n.a=a)==null?e.style.removeProperty(`margin-right`):e.style.setProperty(`margin-right`,a)),o!==n.o&&((n.o=o)==null?e.style.removeProperty(`mask-image`):e.style.setProperty(`mask-image`,o)),n},{e:void 0,t:void 0,a:void 0,o:void 0}),e}})}}),c),l(c,()=>t.name),l(u,()=>t.all?.length),l(o,P(I,{class:`btn-circle btn-sm`,get disabled(){return V()[t.name]},onClick:e=>me(e,t.name),get icon(){return P(L,{get class(){return r(V()[t.name]&&`animate-pulse text-success`)}})}}),null),l(p,()=>oe(t.type)),l(f,P(j,{get when(){return t.now?.length>0},get children(){return[P(e,{size:18}),(()=>{var e=se();return l(e,()=>t.now),e})()]}}),null),l(m,()=>a(fe()[t.name]??0).toString(),h),l(i,P(j,{get when(){return!Z()[t.name]},get children(){return P(x,{get proxyNameList(){return n()},get now(){return t.now},get testUrl(){return t.testUrl||null}})}}),null),i})();return P(u,{get isOpen(){return Z()[t.name]},title:o,onCollapse:e=>Q(t.name,e),get children(){return P(v,{get each(){return n()},children:e=>P(_,{proxyName:e,get testUrl(){return t.testUrl||null},get timeout(){return t.timeout??null},get isSelected(){return t.now===e},onClick:()=>void C(t,e)})})}})}})}})}}),null),l(y,P(j,{get when(){return $()===J.proxyProviders},get children(){return P(W,{get children(){return P(v,{get each(){return k()},children:e=>{let n=O(()=>f({orderingType:D(),proxyNames:e.proxies.map(e=>e.name)??[],testUrl:e.testUrl})),i=[(()=>{var n=ue(),i=n.firstChild,a=i.firstChild,o=a.nextSibling,s=o.nextSibling,c=i.nextSibling;return l(a,()=>e.name),l(o,()=>e.proxies.length),l(s,()=>e.vehicleType),l(c,P(I,{class:`btn btn-circle btn-sm`,get disabled(){return Y()[e.name]},onClick:t=>_e(t,e.name),get icon(){return P(t,{get class(){return r(Y()[e.name]&&`animate-spin text-success`)}})}}),null),l(c,P(I,{class:`btn btn-circle btn-sm`,get disabled(){return H()[e.name]},onClick:t=>ge(t,e.name),get icon(){return P(L,{get class(){return r(H()[e.name]&&`animate-pulse text-success`)}})}}),null),n})(),P(ie,{get subscriptionInfo(){return e.subscriptionInfo}}),(()=>{var t=de(),r=t.firstChild,i=r.firstChild;return l(r,()=>c(`updated`),i),l(r,()=>d(e.updatedAt),null),l(t,P(j,{get when(){return!Z()[e.name]},get children(){return P(x,{get proxyNameList(){return n()},get testUrl(){return e.testUrl}})}}),null),t})()];return P(u,{get isOpen(){return Z()[e.name]},title:i,onCollapse:t=>Q(e.name,t),get children(){return P(v,{get each(){return n()},children:t=>P(_,{proxyName:t,get testUrl(){return e.testUrl},get timeout(){return e.timeout??null}})})}})}})}})}}),null),l(n,P(E,{ref:e=>o=e}),null),n})()]};h([`click`]);export{Y as default};