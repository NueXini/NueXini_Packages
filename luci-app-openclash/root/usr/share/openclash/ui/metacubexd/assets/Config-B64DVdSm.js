import{b as H,A as X,u as E,b9 as K,E as Y,f as e,t as a,i as t,af as v,S as I,ba as te,bb as le,c as z,C as re,g as W,B as F,F as S,x as ne,bc as m,h as C,bd as ae,be as se,bf as ie,bg as oe,bh as ce,bi as ue,bj as de,bk as ge,bl as V,bm as G,bn as he,bo as fe,bp as pe,b8 as me,n as ve,bq as be,br as _e,bs as O,bt as $e,bu as q,bv as xe,bw as Ce,bx as Se,by as R,bz as M,w as B,a1 as L,K as Z,o as J,p as U,v as ee,l as ye,bA as N,bB as ke,bC as we}from"./index-BPVK8l7-.js";import{D as De}from"./DocumentTitle-Dh4EzHth.js";var Fe=a("<input type=checkbox>"),Te=a("<input>"),Ie=a("<select>"),Ne=a("<label>"),Ae=a("<option>A"),Pe=a("<option>AAAA"),Ee=a("<option>CNAME"),Re=a("<option>TXT"),Me=a("<option>MX"),Be=a("<option>SRV"),Le=a("<option>HTTPS"),Ve=a("<option>NS"),je=a("<option>DNSKEY"),Qe=a("<option>DS"),Ge=a("<option>SIG"),Oe=a("<option>SOA"),qe=a("<option>RRSIG"),Ue=a("<option>RP"),He=a('<div class="flex flex-col overflow-auto p-4">'),Xe=a('<div class="flex flex-col"><form class=join>'),Ke=a("<div class=py-2>"),Ye=a('<div class="grid grid-cols-3 gap-2"><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset><fieldset class=fieldset>'),ze=a('<form class="grid grid-cols-3 gap-2 sm:grid-cols-5">'),We=a('<div class="flex flex-col gap-4"><div class="grid grid-cols-3 gap-2"><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset></div><div class="grid grid-cols-2 gap-4 sm:grid-cols-2">'),T=a("<option>"),Ze=a("<fieldset class=fieldset>"),Je=a('<div class="flex flex-col gap-2"><div class="flex flex-col"></div><div class="flex flex-col">'),et=a('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2"><div class="flex flex-col gap-2"><div class="flex flex-col"></div><div class="flex flex-col"></div><div class="flex flex-col"></div></div><div class="flex flex-col gap-2"><div class="flex flex-col items-center"><div class=h-[2.5rem]>'),tt=a('<div class="mx-auto flex max-w-screen-md flex-col gap-4">');const j=c=>{const[l,d]=R(c,["class"]);return(()=>{var s=Fe();return M(s,B({get class(){return L("toggle",l.class)}},d),!1,!1),s})()},P=c=>{const[l,d]=R(c,["class"]);return(()=>{var s=Te();return M(s,B({get class(){return L("input min-w-0",l.class)}},d),!1,!1),s})()},D=c=>{const[l,d]=R(c,["class"]);return(()=>{var s=Ie();return M(s,B({get class(){return L("select",l.class)}},d),!1,!0),t(s,()=>Z(()=>d.children)()),s})()},w=c=>{const[l,d]=R(c,["class"]);return(()=>{var s=Ne();return M(s,B({get class(){return L("label truncate",l.class)}},d),!1,!0),t(s,()=>Z(()=>d.children)()),s})()},lt=J({name:U(),type:U()}),rt=()=>{const[c]=E(),l=le(),d="google.com",{form:s,isSubmitting:b}=z({extend:ee({schema:lt}),onSubmit:o=>l.get("dns/query",{searchParams:{name:o.name||d,type:o.type}}).json().then(({Answer:p})=>f(p?.map(({data:r})=>r)||[])).catch(p=>ye.error(p.message))}),[g,f]=re([]);return(()=>{var o=Xe(),p=o.firstChild;return W(s,p,()=>s),t(p,e(P,{type:"search",name:"name",class:"join-item w-full",placeholder:d,onInput:r=>{r.target.value||f([])}}),null),t(p,e(D,{name:"type",class:"join-item max-w-max",get children(){return[Ae(),Pe(),Ee(),Re(),Me(),Be(),Le(),Ve(),je(),Qe(),Ge(),Oe(),qe(),Ue()]}}),null),t(p,e(F,{type:"submit",class:"join-item max-w-max btn-primary",get loading(){return b()},get children(){return c("dnsQuery")}}),null),t(o,e(I,{get when(){return g().length>0},get children(){var r=He();return t(r,e(S,{get each(){return g()},children:y=>(()=>{var _=Ke();return t(_,y),_})()})),r}}),null),o})()},nt=J({port:N(),"socks-port":N(),"redir-port":N(),"tproxy-port":N(),"mixed-port":N()}),at=({isSingBox:c})=>{const[l]=E(),d=[{label:()=>l("port",{name:"Mixed"}),key:"mixed-port",onChange:r=>void m("mixed-port",Number(r.target.value),o)},{label:()=>l("port",{name:"HTTP"}),key:"port",onChange:r=>void m("port",Number(r.target.value),o)},{label:()=>l("port",{name:"Socks"}),key:"socks-port",onChange:r=>void m("socks-port",Number(r.target.value),o)},{label:()=>l("port",{name:"Redir"}),key:"redir-port",onChange:r=>void m("redir-port",Number(r.target.value),o)},{label:()=>l("port",{name:"TProxy"}),key:"tproxy-port",onChange:r=>void m("tproxy-port",Number(r.target.value),o)}],{form:s,setInitialValues:b,reset:g}=z({extend:ee({schema:nt})}),[f,{refetch:o}]=K(ke);ne(()=>{const r=f();r&&(b(r),g())});const p=Y(()=>{const r=f();return r?.["mode-list"]||r?.modes||["rule","direct","global"]});return(()=>{var r=We(),y=r.firstChild,_=y.firstChild,u=_.nextSibling,h=u.nextSibling,x=y.nextSibling;return t(_,e(w,{for:"enable-allow-lan",get children(){return l("allowLan")}}),null),t(_,e(j,{id:"enable-allow-lan",get checked(){return f()?.["allow-lan"]},onChange:n=>void m("allow-lan",n.target.checked,o)}),null),t(u,e(w,{for:"mode",get children(){return l("runningMode")}}),null),t(u,e(D,{id:"mode",onChange:n=>void m("mode",n.target.value,o),get children(){return e(S,{get each(){return p()},children:n=>(()=>{var i=T();return i.value=n,t(i,()=>l(n)??n),C(()=>i.selected=n===f()?.mode),i})()})}}),null),t(h,e(w,{for:"interface-name",get children(){return l("outboundInterfaceName")}}),null),t(h,e(P,{id:"interface-name",get value(){return f()?.["interface-name"]},onChange:n=>void m("interface-name",n.target.value,o)}),null),t(r,e(I,{get when(){return!c()},get children(){return[(()=>{var n=Ye(),i=n.firstChild,k=i.nextSibling,Q=k.nextSibling;return t(i,e(w,{for:"enable-tun-device",get children(){return l("enableTunDevice")}}),null),t(i,e(j,{id:"enable-tun-device",get checked(){return f()?.tun?.enable},onChange:$=>void m("tun",{enable:$.target.checked},o)}),null),t(k,e(w,{for:"tun-ip-stack",get children(){return l("tunModeStack")}}),null),t(k,e(D,{id:"tun-ip-stack",onChange:$=>void m("tun",{stack:$.target.value},o),get children(){return e(S,{each:["Mixed","gVisor","System","LWIP"],children:$=>(()=>{var A=T();return A.value=$,t(A,$),C(()=>A.selected=f()?.tun?.stack===$),A})()})}}),null),t(Q,e(w,{for:"device-name",get children(){return l("tunDeviceName")}}),null),t(Q,e(P,{id:"device-name",get value(){return f()?.tun?.device},onChange:$=>void m("tun",{device:$.target.value},o)}),null),n})(),(()=>{var n=ze();return W(s,n,()=>s),t(n,e(S,{each:d,children:i=>(()=>{var k=Ze();return t(k,e(w,{get for(){return i.key},get children(){return i.label()}}),null),t(k,e(P,{get id(){return i.key},get name(){return i.key},type:"number",get placeholder(){return i.label()},get onChange(){return i.onChange}}),null),k})()})),n})()]}}),x),t(x,e(F,{class:"btn-primary",get loading(){return se()},onClick:ae,get children(){return l("reloadConfig")}}),null),t(x,e(F,{class:"btn-accent",get loading(){return oe()},onClick:ie,get children(){return l("flushFakeIP")}}),null),t(x,e(F,{class:"btn-warning",get loading(){return ue()},onClick:ce,get children(){return l("restartCore")}}),null),t(x,e(I,{get when(){return!c()},get children(){return e(F,{class:"btn-secondary",get loading(){return ge()},onClick:de,get children(){return l("updateGEODatabases")}})}}),null),r})()},st=()=>{const[c]=E(),l=H(),d=[{label:"English",value:V.EN},{label:"简体中文",value:V.ZH},{label:"Русский",value:V.RU}],s=[{label:"SystemUI",value:G.SystemUI},{label:"FiraSans",value:G.FiraSans}];return(()=>{var b=et(),g=b.firstChild,f=g.firstChild,o=f.nextSibling,p=o.nextSibling,r=g.nextSibling,y=r.firstChild,_=y.firstChild;return t(f,e(v,{get children(){return c("switchFont")}}),null),t(f,e(D,{class:"w-full",onChange:u=>he(u.target.value),get children(){return e(S,{each:s,children:u=>(()=>{var h=T();return t(h,()=>u.label),C(()=>h.selected=fe()===u.value),C(()=>h.value=u.value),h})()})}}),null),t(o,e(v,{get children(){return c("switchLanguage")}}),null),t(o,e(D,{class:"w-full",onChange:u=>pe(u.target.value),get children(){return e(S,{each:d,children:u=>(()=>{var h=T();return t(h,()=>u.label),C(()=>h.selected=me()===u.value),C(()=>h.value=u.value),h})()})}}),null),t(p,e(v,{get children(){return X()?.url}}),null),t(p,e(F,{class:"btn-info",onClick:()=>{ve(""),l(be.Setup)},get children(){return c("switchEndpoint")}}),null),t(y,e(v,{get children(){return c("autoSwitchTheme")}}),_),t(_,e(j,{get checked(){return O()},onChange:u=>_e(u.target.checked)})),t(r,e(I,{get when(){return O()},get children(){var u=Je(),h=u.firstChild,x=h.nextSibling;return t(h,e(v,{get children(){return c("favDayTheme")}}),null),t(h,e(D,{class:"w-full",onChange:n=>$e(n.target.value),get children(){return e(S,{each:q,children:n=>(()=>{var i=T();return i.value=n,t(i,n),C(()=>i.selected=xe()===n),i})()})}}),null),t(x,e(v,{get children(){return c("favNightTheme")}}),null),t(x,e(D,{class:"w-full",onChange:n=>Ce(n.target.value),get children(){return e(S,{each:q,children:n=>(()=>{var i=T();return i.value=n,t(i,n),C(()=>i.selected=Se()===n),i})()})}}),null),u}}),null),b})()},ct=()=>{const c=H();if(!X())return c("/setup",{replace:!0}),null;const[l]=E(),d="v1.192.0",[s]=K(we,{initialValue:""}),b=Y(()=>s()?.includes("sing-box")||!1);return[e(De,{get children(){return l("config")}}),(()=>{var g=tt();return t(g,e(I,{get when(){return!b()},get children(){return[e(v,{withDivider:!0,get children(){return l("dnsQuery")}}),e(rt,{})]}}),null),t(g,e(v,{withDivider:!0,get children(){return l("coreConfig")}}),null),t(g,e(at,{isSingBox:b}),null),t(g,e(v,{withDivider:!0,get children(){return l("xdConfig")}}),null),t(g,e(st,{}),null),t(g,e(v,{withDivider:!0,get children(){return l("version")}}),null),t(g,e(I,{get when(){return!s.loading},get children(){return e(te,{frontendVersion:d,backendVersion:s})}}),null),g})()]};export{ct as default};
